<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#667eea">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Mountainside Aces">
<title>Mountainside Aces - Softball Statistics Hub</title>
<link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="mobile-enhancements.css">
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    min-height: 100vh;
  }
  
  .header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    text-align: center;
    padding: 3rem 2rem;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  }
  
  .header h1 {
    margin: 0;
    font-size: 3rem;
    font-weight: bold;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
  }
  
  .header p {
    margin: 1rem 0 0 0;
    font-size: 1.2rem;
    opacity: 0.9;
  }
  
  .dashboard-container {
    max-width: 1200px;
    margin: 2rem auto;
    padding: 0 2rem;
  }
  
  .section {
    margin-bottom: 3rem;
  }
  
  .section-title {
    font-size: 1.8rem;
    font-weight: bold;
    color: #333;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 3px solid #667eea;
    display: flex;
    align-items: center;
  }
  
  .section-title::before {
    content: "";
    display: inline-block;
    width: 6px;
    height: 30px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    margin-right: 1rem;
    border-radius: 3px;
  }
  
  .cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-top: 1.5rem;
  }
  
  .card {
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 4px 6px rgba(0,0,0,0.07);
    transition: all 0.3s ease;
    border: 1px solid #e1e5e9;
    position: relative;
    overflow: hidden;
  }
  
  .card::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
  }
  
  .card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
  }
  
  .card-link {
    text-decoration: none;
    color: inherit;
    display: block;
  }
  
  .card-icon {
    font-size: 2.5rem;
    margin-bottom: 1rem;
    color: #667eea;
  }
  
  .card-title {
    font-size: 1.3rem;
    font-weight: bold;
    color: #333;
    margin-bottom: 0.5rem;
  }
  
  .card-description {
    color: #666;
    font-size: 0.95rem;
    line-height: 1.5;
    margin-bottom: 1rem;
  }
  
  .card-stats {
    font-size: 0.85rem;
    color: #888;
    border-top: 1px solid #f0f0f0;
    padding-top: 1rem;
  }
  
  /* Special styling for main stats cards */
  .main-stats-card {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
  }
  
  .main-stats-card .card-icon,
  .main-stats-card .card-title,
  .main-stats-card .card-description {
    color: white;
  }
  
  .main-stats-card .card-stats {
    border-top-color: rgba(255,255,255,0.2);
    color: rgba(255,255,255,0.8);
  }
  
  .pitching-card {
    background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
    color: white;
  }
  
  .pitching-card .card-icon,
  .pitching-card .card-title,
  .pitching-card .card-description {
    color: white;
  }
  
  .pitching-card .card-stats {
    border-top-color: rgba(255,255,255,0.2);
    color: rgba(255,255,255,0.8);
  }

  /* New seasonal card styling */
  .seasonal-card {
    background: linear-gradient(135deg, #ff7b7b 0%, #ff6b6b 100%);
    color: white;
    border: none;
  }
  
  .seasonal-card::before {
    background: linear-gradient(90deg, #ff6b6b 0%, #ff5252 100%);
  }
  
  .seasonal-card .card-icon,
  .seasonal-card .card-title,
  .seasonal-card .card-description {
    color: white;
  }
  
  .seasonal-card .card-stats {
    border-top-color: rgba(255,255,255,0.2);
    color: rgba(255,255,255,0.8);
  }

  /* Autumn themed card styling */
  .autumn-card {
    background: linear-gradient(135deg, #d2691e 0%, #ff8c00 100%);
    color: white;
    border: none;
  }
  
  .autumn-card::before {
    background: linear-gradient(90deg, #ff8c00 0%, #ff7f00 100%);
  }
  
  .autumn-card .card-icon,
  .autumn-card .card-title,
  .autumn-card .card-description {
    color: white;
  }
  
  .autumn-card .card-stats {
    border-top-color: rgba(255,255,255,0.2);
    color: rgba(255,255,255,0.8);
  }

  /* Harvest themed card styling */
  .harvest-card {
    background: linear-gradient(135deg, #8b4513 0%, #cd853f 100%);
    color: white;
    border: none;
  }
  
  .harvest-card::before {
    background: linear-gradient(90deg, #cd853f 0%, #daa520 100%);
  }
  
  .harvest-card .card-icon,
  .harvest-card .card-title,
  .harvest-card .card-description {
    color: white;
  }
  
  .harvest-card .card-stats {
    border-top-color: rgba(255,255,255,0.2);
    color: rgba(255,255,255,0.8);
  }

  .quick-access {
    background: white;
    border-radius: 12px;
    padding: 2rem;
    box-shadow: 0 4px 6px rgba(0,0,0,0.07);
    border: 1px solid #e1e5e9;
  }
  
  .quick-nav {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    align-items: center;
  }
  
  .nav-btn {
    padding: 0.8rem 1.5rem;
    border: 2px solid #667eea;
    background: white;
    color: #667eea;
    text-decoration: none;
    border-radius: 8px;
    font-weight: 600;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  .nav-btn:hover {
    background: #667eea;
    color: white;
    transform: translateY(-2px);
  }
	
  .nav-btn.primary {
    background: #667eea;
    color: white;
  }
  
  .nav-btn.primary:hover {
    background: #5a67d8;
  }
  
  @media (max-width: 768px) {
    .header h1 {
      font-size: 2rem;
    }
    
    .dashboard-container {
      padding: 0 1rem;
    }
    
    .cards-grid {
      grid-template-columns: 1fr;
    }
    
  }
  /* Scrolling Banner Styles */
.news-banner {
  background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
  color: white;
  overflow: hidden;
  white-space: nowrap;
  position: relative;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  border-bottom: 3px solid #c23616;
}

.news-content {
  display: inline-block;
  padding: 12px 0;
  animation: scroll-left 45s linear infinite;
  font-weight: 600;
  font-size: 1.1rem;
}

.news-item {
  display: inline-block;
  margin-right: 50px;
  padding: 0 20px;
  position: relative;
}

.news-item::after {
  content: "â€¢";
  position: absolute;
  right: -25px;
  top: 0;
  color: rgba(255,255,255,0.7);
  font-size: 1.2rem;
}

.news-item:last-child::after {
  display: none;
}

.news-announcement {
  color: #ffd700;
  font-weight: bold;
}

.news-score {
  color: #ffffff;
}

.news-winner {
  color: #00ff88;
  font-weight: bold;
}

.news-upcoming {
  color: #87ceeb;
  font-weight: 600;
}
@keyframes scroll-left {
  0% { transform: translateX(25%); }
  100% { transform: translateX(-100%); }
}

/* Pause animation on hover */
.news-banner:hover .news-content {
  animation-play-state: paused;
}

/* Responsive Design for Banner */
@media (max-width: 768px) {
  .news-content {
    font-size: 1rem;
  }
  
  .news-item {
    margin-right: 30px;
    padding: 0 15px;
  }
}
</style>
</head>
<body>

  <!-- Mobile Navigation -->
  <div class="mobile-nav-container">
    <div class="mobile-nav-header">
      <div class="mobile-nav-title">âš¾ Mountainside Aces</div>
      <button class="hamburger-menu" onclick="toggleMobileMenu()" aria-label="Toggle navigation">â˜°</button>
    </div>
    <nav class="mobile-nav-menu" id="mobileNavMenu">
      <a href="index.html" class="mobile-nav-item active">ğŸ  Home</a>
      <a href="current-season.html" class="mobile-nav-item">ğŸ‚ Current Season</a>
      <a href="weekend-preview.html" class="mobile-nav-item">ğŸ”® Weekend Preview</a>
      <a href="projections.html" class="mobile-nav-item">ğŸ“ˆ Playoff Projections</a>
      <a href="batting.html" class="mobile-nav-item">âš¾ Batting Stats</a>
      <a href="pitching.html" class="mobile-nav-item">ğŸ¥ Pitching Stats</a>
      <a href="teams.html" class="mobile-nav-item">ğŸ† All Teams</a>
      <a href="players.html" class="mobile-nav-item">ğŸ‘¤ All Players</a>
      <a href="seasons.html" class="mobile-nav-item">ğŸ“… All Seasons</a>
      <a href="awards.html" class="mobile-nav-item">ğŸ… Awards</a>
      <a href="leaders.html" class="mobile-nav-item">ğŸ“Š Career Leaders</a>
      <a href="milestones.html" class="mobile-nav-item">ğŸ¯ Milestones</a>
      <a href="compare.html" class="mobile-nav-item">ğŸ“ˆ Player Comparison</a>
      <a href="team_compare.html" class="mobile-nav-item">ğŸ†š Team Comparison</a>
      <a href="h2h_grid.html" class="mobile-nav-item">âš”ï¸ Head-to-Head Grid</a>
	  <a href="pictures.html" class="mobile-nav-item">ğŸ“· Gallery</a>
    </nav>
  </div>

  <!-- Scrolling News Banner -->
<div class="news-banner">
  <div class="news-content" id="newsContent">
    <!-- Content will be dynamically loaded -->
  </div>
</div>
  <header class="header">
    <h1>âš¾ï¸ Mountainside Aces</h1>
    <p>Softball Statistics Hub</p>
  </header>

<!-- Global Search Bar -->
<div class="global-search-container">
  <div class="search-wrapper">
    <div class="search-icon">ğŸ”</div>
    <input 
      type="text" 
      class="global-search-input" 
      placeholder="Search players, teams, seasons..."
      id="globalSearch"
      autocomplete="off"
    >
    <button class="clear-search" id="clearSearch">âœ•</button>
  </div>
  <div class="search-results" id="searchResults">
    <!-- Results will be populated here -->
  </div>
</div>
  <div class="dashboard-container">
    <!-- Current Season Section -->
    <section class="section">
      <h2 class="section-title">Current Season</h2>
      <div class="cards-grid">
        <a href="current-season.html" class="card-link">
          <div class="card seasonal-card">
            <div class="card-icon">ğŸ‚</div>
            <h3 class="card-title">2025 Fall Season</h3>
            <p class="card-description">View current standings, upcoming schedule, past results, and projected playoff bracket</p>
            <div class="card-stats">
              <div>ğŸ“Š Live standings & playoff tracker</div>
              <div>ğŸ“… Complete schedule & results</div>
              <div>ğŸ†Season Hitting Leaders</div>
            </div>
          </div>
        </a>
        <a href="weekend-preview.html" class="card-link">
          <div class="card autumn-card">
            <div class="card-icon">ğŸ¥</div>
            <h3 class="card-title">Weekend Preview</h3>
            <p class="card-description">High-level overview of upcoming weekend games with matchup analysis and betting odds</p>
            <div class="card-stats">
              <div>âš”ï¸ Team matchups & records</div>
              <div>ğŸ¯ Game previews & predictions</div>
              <div>ğŸƒ Odds and analysis</div>
            </div>
          </div>
        </a>
        <a href="projections.html" class="card-link">
          <div class="card harvest-card">
            <div class="card-icon">ğŸ±</div>
            <h3 class="card-title">Playoff Predictor</h3>
            <p class="card-description">Use your crystal ball and simulate the rest of the season to see the expected playoff bracket</p>
            <div class="card-stats">
              <div>ğŸ”® See the future and predict the final standings</div>
              <div>ğŸ’» Simulate thousands of possible season outcomes</div>
            </div>
          </div>
        </a>
      </div>
    </section>

    <!-- Statistics Section -->
    <section class="section">
      <h2 class="section-title">Statistics</h2>
      <div class="cards-grid">
        <a href="batting.html" class="card-link">
          <div class="card main-stats-card">
            <div class="card-icon">âš¾</div>
            <h3 class="card-title">Batting Statistics</h3>
            <p class="card-description">Complete batting statistics for all players across all seasons</p>
            <div class="card-stats">
              <div>ğŸ“Š Advanced metrics & career leaders</div>
              <div>ğŸ† Filter by season, team, or player</div>
            </div>
          </div>
        </a>
        
        <a href="pitching.html" class="card-link">
          <div class="card pitching-card">
            <div class="card-icon">ğŸ¥</div>
            <h3 class="card-title">Pitching Statistics</h3>
            <p class="card-description">Comprehensive pitching stats and analytics</p>
            <div class="card-stats">
              <div>ğŸ“ˆ ERA, strikeouts, innings pitched</div>
              <div>ğŸ¯ Advanced pitching metrics</div>
            </div>
          </div>
        </a>
      </div>
    </section>

    <!-- Teams & Players Section -->
    <section class="section">
      <h2 class="section-title">Teams & Players</h2>
      <div class="cards-grid">
        <a href="teams.html" class="card-link">
          <div class="card">
            <div class="card-icon">ğŸ†</div>
            <h3 class="card-title">All Teams</h3>
            <p class="card-description">Team profiles, rosters, and championship history</p>
            <div class="card-stats">
              <div>ğŸ–ï¸ Championship records</div>
              <div>ğŸ‘¥ Complete roster information</div>
            </div>
          </div>
        </a>
        
        <a href="players.html" class="card-link">
          <div class="card">
            <div class="card-icon">ğŸ‘¤</div>
            <h3 class="card-title">All Players</h3>
            <p class="card-description">Individual player profiles and career statistics</p>
            <div class="card-stats">
              <div>ğŸ“ˆ Career progression tracking</div>
              <div>ğŸ… Awards and achievements</div>
            </div>
          </div>
        </a>
        <a href="h2h_grid.html" class="card-link">
          <div class="card">
            <div class="card-icon">#ï¸âƒ£</div>
            <h3 class="card-title">Head to Head Grid</h3>
            <p class="card-description">Summary of Head to Head Aces Match-Up</p>
            <div class="card-stats">
              <div>ğŸ†š Summary of Head to Head Performance</div>
              <div>ğŸ… Rivalry Stats and Records</div>
            </div>
          </div>
        </a>
        
      </div>
    </section>

    <!-- League Information Section -->
    <section class="section">
      <h2 class="section-title">League Information</h2>
      <div class="cards-grid">
        <a href="seasons.html" class="card-link">
          <div class="card">
            <div class="card-icon">ğŸ“…</div>
            <h3 class="card-title">All Seasons</h3>
            <p class="card-description">Browse statistics and results by season and year</p>
            <div class="card-stats">
              <div>ğŸ“Š Historical season data</div>
              <div>ğŸ† Championship results</div>
            </div>
          </div>
        </a>
        
        <a href="awards.html" class="card-link">
          <div class="card">
            <div class="card-icon">ğŸ…</div>
            <h3 class="card-title">League Awards</h3>
            <p class="card-description">MVP, batting champions, and special recognitions</p>
            <div class="card-stats">
              <div>ğŸ† Seasonal award winners</div>
              <div>â­ Special achievements</div>
            </div>
          </div>
        </a>
        
        <a href="leaders.html" class="card-link">
          <div class="card">
            <div class="card-icon">ğŸ“Š</div>
            <h3 class="card-title">Career Leaders</h3>
            <p class="card-description">All-time statistical leaders and records</p>
            <div class="card-stats">
              <div>ğŸ“ˆ Batting & pitching leaders</div>
              <div>ğŸ¯ League records</div>
            </div>
          </div>
        </a>
        <a href="pictures.html" class="card-link">
          <div class="card">
            <div class="card-icon">ğŸ“·</div>
            <h3 class="card-title">Aces Media Gallery</h3>
            <p class="card-description">See the photos & videos of the Aces over the years!</p>
            <div class="card-stats">
              <div>ğŸ¥ Photos & Videos from over the years</div>
              <div>ğŸ¬ Game Day Action Shots</div>
              <div>ğŸ­ Off the Field Memories as well</div>
            </div>
          </div>
        </a>
      </div>
    </section>
  
    
    <!-- Tools -->
    <section class="section">
      <h2 class="section-title">Tools</h2>
      <div class="cards-grid">
        <a href="compare.html" class="card-link">
          <div class="card">
            <div class="card-icon">ğŸ“ˆ</div>
            <h3 class="card-title">Player Comparisons</h3>
            <p class="card-description">Side-by-side comparison tool for analyzing player performance across careers or specific seasons.</p>
            <div class="card-stats">
              <div>ğŸ–ï¸ Career comparisons</div>
              <div>ğŸ“ˆ Season analysis</div>
              <div>ğŸ†š Head-to-head stats</div>
            </div>
          </div>
        </a>
        
        <a href="team_compare.html" class="card-link">
          <div class="card">
            <div class="card-icon">ğŸ†š</div>
            <h3 class="card-title">Team Comparisons</h3>
            <p class="card-description">Side-by-side comparison tool for analyzing team performance across careers or specific seasons</p>
            <div class="card-stats">
              <div>ğŸ†š Head to Head Record</div>
               <div>ğŸ“Š Team Synopsis</div>
              <div>ğŸ…  Award Summary</div>
            </div>
          </div>
        </a>
        <a href="charts.html" class="card-link">
          <div class="card">
            <div class="card-icon">ğŸ“Š</div>
            <h3 class="card-title">Performance Charts</h3>
            <p class="card-description">Interactive charts and visualizations showing team performance comparisons, win/loss records, batting statistics, and season standings with export capabilities.</p>
            <div class="card-stats">
               <div>ğŸ“ˆ Team and Player Charts</div>
               <div>ğŸ–¼ï¸ Data Visualization</div>
              <div>ğŸ”¥ Export Functionality</div>
            </div>
          </div>
        </a>
      </div>
    </section>

    
    <!-- Quick Access Section -->
    <section class="section">
      <div class="quick-access">
        <h3 style="margin-bottom: 1.5rem; color: #333;">Quick Access</h3>
        <div class="quick-nav">
          <a href="current-season.html" class="nav-btn primary">
            ğŸ‚ Current Season
          </a>
		  <a href="weekend-preview.html" class="nav-btn">
            ğŸ”® Weekend Preview
          </a>
          <a href="batting.html" class="nav-btn">
            âš¾ Batting Stats
          </a>
          <a href="pitching.html" class="nav-btn">
            ğŸ¥ Pitching Stats
          </a>
          <a href="teams.html" class="nav-btn">
            ğŸ† Teams
          </a>
          <a href="players.html" class="nav-btn">
            ğŸ‘¤ Players
          </a>
          <a href="seasons.html" class="nav-btn">
            ğŸ“… Seasons
          </a>
        </div>
      </div>
    </section>
  </div>

<script>// Global Search Functionality
class GlobalSearch {
  constructor() {
    this.searchInput = document.getElementById('globalSearch');
    this.searchResults = document.getElementById('searchResults');
    this.clearButton = document.getElementById('clearSearch');
    
    // Only initialize if elements exist
    if (!this.searchInput || !this.searchResults || !this.clearButton) {
      console.warn('Global search elements not found');
      return;
    }
    
    this.allData = [];
    this.allTeams = [];
    this.allSeasons = [];
    this.currentHighlight = -1;
    this.searchTimeout = null;
    
    this.init();
  }
  
  async init() {
    await this.loadData();
    this.bindEvents();
  }
  
  async loadData() {
    try {
      const [battingResponse, pitchingResponse, gamesResponse, awardsResponse] = await Promise.all([
        fetch("data.json"),
        fetch("pitching.json").catch(() => ({ ok: false })),
        fetch("games.json").catch(() => ({ ok: false })),
        fetch("awards.json").catch(() => ({ ok: false }))
      ]);
      
      const battingData = await battingResponse.json();
      const pitchingData = pitchingResponse.ok ? await pitchingResponse.json() : [];
      const gamesData = gamesResponse.ok ? await gamesResponse.json() : [];
      const awardsData = awardsResponse.ok ? await awardsResponse.json() : [];
      
      this.allData = this.processPlayerData(battingData, pitchingData, awardsData);
      this.allTeams = this.processTeamData(battingData, gamesData);
      this.allSeasons = this.processSeasonData(battingData, pitchingData, gamesData);
      
      console.log('Search data loaded:', {
        players: this.allData.length,
        teams: this.allTeams.length,
        seasons: this.allSeasons.length
      });
      
    } catch (error) {
      console.error('Error loading search data:', error);
      this.allData = [];
      this.allTeams = [];
      this.allSeasons = [];
    }
  }
  
  processPlayerData(battingData, pitchingData, awardsData) {
    const playerStats = {};
    
    battingData.forEach(entry => {
      if (!entry.name) return;
      
      const name = entry.name.trim();
      if (!playerStats[name]) {
        playerStats[name] = {
          name: name,
          teams: new Set(),
          games: 0,
          atBats: 0,
          hits: 0,
          runs: 0,
          walks: 0,
          mostRecentTeam: entry.team,
          mostRecentYear: entry.year,
          awards: 0
        };
      }
      
      const player = playerStats[name];
      player.teams.add(entry.team);
      player.games += Number(entry.games) || 0;
      player.atBats += Number(entry.atBats) || 0;
      player.hits += Number(entry.hits) || 0;
      player.runs += Number(entry.runs) || 0;
      player.walks += Number(entry.walks) || 0;
      
      if (entry.year >= player.mostRecentYear) {
        player.mostRecentTeam = entry.team;
        player.mostRecentYear = entry.year;
      }
    });
    
    awardsData.forEach(award => {
      if (!award.Player) return;
      const name = award.Player.trim();
      if (playerStats[name]) {
        playerStats[name].awards++;
      }
    });
    
    return Object.values(playerStats).map(player => ({
      ...player,
      team: player.mostRecentTeam,
      avg: player.atBats > 0 ? (player.hits / player.atBats) : 0,
      teamCount: player.teams.size,
      type: 'player'
    }));
  }
  
  processTeamData(battingData, gamesData) {
    const teamStats = {};
    
    battingData.forEach(entry => {
      if (!entry.team) return;
      const team = entry.team.trim();
      if (!teamStats[team]) {
        teamStats[team] = {
          name: team,
          players: new Set(),
          totalGames: 0,
          wins: 0,
          losses: 0,
          type: 'team'
        };
      }
      teamStats[team].players.add(entry.name);
    });
    
    gamesData.forEach(game => {
      const homeTeam = game["home team"];
      const awayTeam = game["away team"];
      const winner = game.winner;
      
      if (teamStats[homeTeam]) {
        teamStats[homeTeam].totalGames++;
        if (winner === homeTeam) {
          teamStats[homeTeam].wins++;
        } else if (winner !== "Tie") {
          teamStats[homeTeam].losses++;
        }
      }
      
      if (teamStats[awayTeam]) {
        teamStats[awayTeam].totalGames++;
        if (winner === awayTeam) {
          teamStats[awayTeam].wins++;
        } else if (winner !== "Tie") {
          teamStats[awayTeam].losses++;
        }
      }
    });
    
    return Object.values(teamStats).map(team => ({
      ...team,
      pct: (team.wins + team.losses) > 0 ? team.wins / (team.wins + team.losses) : 0,
      playerCount: team.players.size
    }));
  }
  
  processSeasonData(battingData, pitchingData, gamesData) {
    const seasonStats = {};
    
    battingData.forEach(entry => {
      if (!entry.year || !entry.season) return;
      const key = `${entry.year}_${entry.season}`;
      
      if (!seasonStats[key]) {
        seasonStats[key] = {
          year: entry.year,
          season: entry.season,
          teams: new Set(),
          players: new Set(),
          games: 0,
          type: 'season'
        };
      }
      
      seasonStats[key].teams.add(entry.team);
      seasonStats[key].players.add(entry.name);
    });
    
    gamesData.forEach(game => {
      const key = `${game.year}_${game.season}`;
      if (seasonStats[key]) {
        seasonStats[key].games++;
      }
    });
    
    return Object.values(seasonStats).map(season => ({
      ...season,
      teamCount: season.teams.size,
      playerCount: season.players.size
    }));
  }
  
  bindEvents() {
    this.searchInput.addEventListener('input', (e) => {
      this.handleSearch(e.target.value);
    });
    
    this.searchInput.addEventListener('keydown', (e) => {
      this.handleKeyNavigation(e);
    });
    
    this.searchInput.addEventListener('focus', () => {
      if (this.searchInput.value.trim()) {
        this.showResults();
      }
    });
    
    this.clearButton.addEventListener('click', () => {
      this.clearSearch();
    });
    
    document.addEventListener('click', (e) => {
      if (!this.searchInput.contains(e.target) && !this.searchResults.contains(e.target)) {
        this.hideResults();
      }
    });
  }
  
  handleSearch(query) {
    if (this.searchTimeout) {
      clearTimeout(this.searchTimeout);
    }
    
    this.clearButton.classList.toggle('show', query.length > 0);
    
    if (query.trim().length === 0) {
      this.hideResults();
      return;
    }
    
    this.searchTimeout = setTimeout(() => {
      this.performSearch(query.trim());
    }, 150);
  }
  
  performSearch(query) {
    const results = {
      players: this.searchPlayers(query),
      teams: this.searchTeams(query),
      seasons: this.searchSeasons(query)
    };
    
    const shouldPrioritizeTeams = this.shouldPrioritizeTeams(query, results);
    this.displayResults(results, query, shouldPrioritizeTeams);
  }
  
  shouldPrioritizeTeams(query, results) {
    const q = query.toLowerCase().trim();
    
    return results.teams.some(team => {
      const teamName = team.name.toLowerCase();
      return teamName === q || teamName.startsWith(q) || q.startsWith(teamName);
    });
  }
  
  searchPlayers(query) {
    const q = query.toLowerCase();
    return this.allData
      .filter(player => 
        player.name.toLowerCase().includes(q) ||
        player.team.toLowerCase().includes(q)
      )
      .slice(0, 8)
      .map(player => ({
        ...player,
        type: 'player'
      }));
  }
  
  searchTeams(query) {
    const q = query.toLowerCase();
    return this.allTeams
      .filter(team => team.name.toLowerCase().includes(q))
      .slice(0, 5)
      .map(team => ({
        ...team,
        type: 'team'
      }));
  }
  
  searchSeasons(query) {
    const q = query.toLowerCase();
    return this.allSeasons
      .filter(season => 
        season.year.toString().includes(query) ||
        season.season.toLowerCase().includes(q) ||
        `${season.year} ${season.season}`.toLowerCase().includes(q)
      )
      .sort((a, b) => {
        if (a.year !== b.year) {
          return b.year.localeCompare(a.year);
        }
        if (a.season === b.season) return 0;
        return a.season === 'Fall' ? -1 : 1;
      })
      .slice(0, 6)
      .map(season => ({
        ...season,
        type: 'season'
      }));
  }
  
  displayResults(results, query, prioritizeTeams = false) {
    const totalResults = results.players.length + results.teams.length + results.seasons.length;
    
    if (totalResults === 0) {
      this.searchResults.innerHTML = `
        <div class="no-results">
          No results found for "${query}"
        </div>
      `;
      this.showResults();
      return;
    }
    
    let html = '';
    
    if (prioritizeTeams) {
      if (results.teams.length > 0) {
        html += this.renderTeamsSection(results.teams, query);
      }
      if (results.players.length > 0) {
        html += this.renderPlayersSection(results.players, query);
      }
    } else {
      if (results.players.length > 0) {
        html += this.renderPlayersSection(results.players, query);
      }
      if (results.teams.length > 0) {
        html += this.renderTeamsSection(results.teams, query);
      }
    }
    
    if (results.seasons.length > 0) {
      html += this.renderSeasonsSection(results.seasons, query);
    }
    
    this.searchResults.innerHTML = html;
    this.showResults();
    this.bindResultEvents();
  }
  
  renderPlayersSection(players, query) {
    return `
      <div class="search-category">
        <div class="category-header">Players</div>
        ${players.map(player => `
          <div class="search-item" data-type="player" data-name="${player.name}" data-team="${player.team}">
            <div class="search-item-icon">ğŸ‘¤</div>
            <div class="search-item-content">
              <div class="search-item-title">${this.highlightMatch(player.name, query)}</div>
             <div class="search-item-subtitle">  <span class="team-badge-${player.team.toLowerCase()}">${player.team}</span> â€¢ ${player.games} games </div>
            </div>
            <div class="search-item-stats">
              ${player.atBats > 0 ? `.${player.avg.toFixed(3)} AVG<br>${player.hits} hits` : `${player.runs} runs`}
            </div>
          </div>
        `).join('')}
      </div>
    `;
  }
  
  renderTeamsSection(teams, query) {
    return `
      <div class="search-category">
        <div class="category-header">Teams</div>
        ${teams.map(team => `
          <div class="search-item" data-type="team" data-name="${team.name}">
            <div class="search-item-icon">ğŸ†</div>
            <div class="search-item-content">
              <div class="search-item-title team-text-${team.name.toLowerCase()}">  ${this.highlightMatch(team.name, query)}</div>
              <div class="search-item-subtitle">${team.wins}-${team.losses} record â€¢ ${team.playerCount} players</div>
            </div>
            <div class="search-item-stats">
              ${team.wins + team.losses > 0 ? `.${team.pct.toFixed(3)} PCT` : 'New team'}
            </div>
          </div>
        `).join('')}
      </div>
    `;
  }
  
  renderSeasonsSection(seasons, query) {
    return `
      <div class="search-category">
        <div class="category-header">Seasons</div>
        ${seasons.map(season => `
          <div class="search-item" data-type="season" data-year="${season.year}" data-season="${season.season}">
            <div class="search-item-icon">ğŸ“…</div>
            <div class="search-item-content">
              <div class="search-item-title">${this.highlightMatch(`${season.year} ${season.season}`, query)}</div>
              <div class="search-item-subtitle">${season.teamCount} teams â€¢ ${season.playerCount} players</div>
            </div>
            <div class="search-item-stats">
              ${season.games} games
            </div>
          </div>
        `).join('')}
      </div>
    `;
  }
  
  highlightMatch(text, query) {
    const regex = new RegExp(`(${query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
    return text.replace(regex, '<span class="highlight">$1</span>');
  }
  
  bindResultEvents() {
    const items = this.searchResults.querySelectorAll('.search-item');
    items.forEach((item, index) => {
      item.addEventListener('click', () => {
        this.selectResult(item);
      });
      
      item.addEventListener('mouseenter', () => {
        this.currentHighlight = index;
        this.updateHighlight();
      });
    });
  }
  
  selectResult(item) {
    const type = item.dataset.type;
    
    switch(type) {
      case 'player':
        const playerName = item.dataset.name;
        window.location.href = `player.html?name=${encodeURIComponent(playerName)}`;
        break;
        
      case 'team':
        const team = item.dataset.name;
        window.location.href = `team.html?team=${encodeURIComponent(team)}`;
        break;
        
      case 'season':
        const year = item.dataset.year;
        const season = item.dataset.season;
        window.location.href = `season.html?year=${year}&season=${encodeURIComponent(season)}`;
        break;
    }
    
    this.hideResults();
    this.clearSearch();
  }
  
  handleKeyNavigation(e) {
    const items = this.searchResults.querySelectorAll('.search-item');
    
    switch(e.key) {
      case 'ArrowDown':
        e.preventDefault();
        this.currentHighlight = Math.min(this.currentHighlight + 1, items.length - 1);
        this.updateHighlight();
        break;
        
      case 'ArrowUp':
        e.preventDefault();
        this.currentHighlight = Math.max(this.currentHighlight - 1, -1);
        this.updateHighlight();
        break;
        
      case 'Enter':
        e.preventDefault();
        if (this.currentHighlight >= 0 && items[this.currentHighlight]) {
          this.selectResult(items[this.currentHighlight]);
        }
        break;
        
      case 'Escape':
        this.hideResults();
        this.searchInput.blur();
        break;
    }
  }
  
  updateHighlight() {
    const items = this.searchResults.querySelectorAll('.search-item');
    items.forEach((item, index) => {
      item.classList.toggle('highlighted', index === this.currentHighlight);
    });
  }
  
  showResults() {
    this.searchResults.classList.add('show');
    this.currentHighlight = -1;
  }
  
  hideResults() {
    this.searchResults.classList.remove('show');
    this.currentHighlight = -1;
  }
  
  clearSearch() {
    this.searchInput.value = '';
    this.clearButton.classList.remove('show');
    this.hideResults();
    this.searchInput.focus();
  }
}

// Initialize search when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
  new GlobalSearch();
});
</script>
  <script>
// Sample announcements and recent scores data
const announcements = [
  { type: 'announcement', text: 'ğŸ† 2025 Fall Playoffs starts November 16th!', className: 'news-announcement' },
  { type: 'announcement', text: 'â­ Remember to clean up all trash after your games!', className: 'news-announcement' }
];

let recentScores = [];
let allGames = [];
let upcomingSchedule = [];

// Load recent scores from games.json
async function loadRecentScores() {
  try {
    const [gamesResponse, previewsResponse] = await Promise.all([
      fetch('games.json'),
      fetch('previews.json')
    ]);
    
    if (gamesResponse.ok) {
      allGames = await gamesResponse.json();
    }
    
    let previews = [];
    if (previewsResponse.ok) {
      previews = await previewsResponse.json();
    }
    
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    // Get completed games (past games with winners)
    const completedGames = allGames
      .filter(game => {
        const gameDate = new Date(game.date);
        return game.year === "2025" && 
               game.season === "Fall" && 
               game.winner && 
               game.winner.trim() !== "" &&
               gameDate < today;
      })
      .sort((a, b) => new Date(b.date) - new Date(a.date))
      .slice(0, 5);

    recentScores = completedGames.map(game => ({
      type: 'score',
      text: formatGameResult(game),
      className: 'news-score'
    }));
    
    // Get upcoming games from previews.json (future games)
    const upcomingGames = previews
      .filter(game => {
        const gameDate = new Date(game.date);
        return gameDate >= today;
      })
      .sort((a, b) => new Date(a.date) - new Date(b.date))
      .slice(0, 5);

    upcomingSchedule = upcomingGames.map(game => ({
      type: 'upcoming',
      text: formatUpcomingGame(game),
      className: 'news-upcoming'
    }));
    
  } catch (error) {
    console.log('Could not load games data:', error);
    // Fallback data
    recentScores = [
      { type: 'score', text: 'ğŸ† Blue defeats Orange 12-8 in thriller!', className: 'news-score' }
    ];
    upcomingSchedule = [
      { type: 'upcoming', text: 'ğŸ“… Gold @ Silver - Oct 15 7:00 PM', className: 'news-upcoming' }
    ];
  }
  
  updateNewsBanner();
}

function formatGameResult(game) {
  const homeTeam = game["home team"];
  const awayTeam = game["away team"];
  const homeScore = game["home score"];
  const awayScore = game["away score"];
  const winner = game.winner;
  
  let scoreText;
  if (homeScore === "W" && awayScore === "L") {
    scoreText = `${homeTeam} defeats ${awayTeam}`;
  } else if (homeScore === "L" && awayScore === "W") {
    scoreText = `${awayTeam} defeats ${homeTeam}`;
  } else if (winner === "Tie") {
    scoreText = `${homeTeam} ties ${awayTeam} ${homeScore}-${awayScore}`;
  } else {
    // Determine winner and format with winning score first
    const winnerTeam = winner;
    const loserTeam = winner === homeTeam ? awayTeam : homeTeam;
    
    // Get winning and losing scores
    let winnerScore, loserScore;
    if (winner === homeTeam) {
      winnerScore = homeScore;
      loserScore = awayScore;
    } else {
      winnerScore = awayScore;
      loserScore = homeScore;
    }
    
    scoreText = `${winnerTeam} defeats ${loserTeam} ${winnerScore}-${loserScore}`;
  }
  
  return `âš¾ ${scoreText}`;
}
function formatUpcomingGame(game) {
  const homeTeam = game["home team"];
  const awayTeam = game["away team"];
  const gameDate = game.date;
  const gameTime = game.time || "TBD";
  
  // Format the date nicely
  const dateObj = new Date(gameDate);
  const formattedDate = dateObj.toLocaleDateString('en-US', { 
    month: 'short', 
    day: 'numeric' 
  });
  
  // Only show time if it exists and isn't empty
  const timeDisplay = gameTime && gameTime.trim() !== "" ? ` ${gameTime}` : "";
  
  return `ğŸ“… ${awayTeam} @ ${homeTeam} - ${formattedDate}${timeDisplay}`;
}
function updateNewsBanner() {
  const newsContent = document.getElementById('newsContent');
  const allNews = [...announcements, ...recentScores, ...upcomingSchedule];
  
  if (allNews.length === 0) {
    newsContent.innerHTML = '<span class="news-item news-announcement">ğŸ† Welcome to Mountainside Aces Statistics Hub!</span>';
    return;
  }
  
  const newsHTML = allNews.map(item => 
    `<span class="news-item ${item.className}">${item.text}</span>`
  ).join('');
  
  newsContent.innerHTML = newsHTML;
}

// Initialize the banner when page loads
document.addEventListener('DOMContentLoaded', function() {
  loadRecentScores();
});

// Update banner every 5 minutes to get fresh scores
setInterval(loadRecentScores, 5 * 60 * 1000);
</script>
 <script src="mobile-enhancements.js"></script>
</body>
</html>
