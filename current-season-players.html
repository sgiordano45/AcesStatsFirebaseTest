<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Current Season Players - Aces Stats</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 0;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    min-height: 100vh;
    line-height: 1.6;
  }
  
  .page-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 2rem;
  }
  
  .page-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    text-align: center;
    padding: 3rem 2rem;
    border-radius: 12px;
    margin-bottom: 2rem;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    position: relative;
    overflow: hidden;
  }
  
  .page-header::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #ffd700 0%, #ffed4e 100%);
  }
  
  .page-header h1 {
    margin: 0;
    font-size: 2.5rem;
    font-weight: bold;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
  }
  
  .page-header p {
    margin: 1rem 0 0 0;
    font-size: 1.1rem;
    opacity: 0.9;
  }

  .back-nav {
    background: white;
    padding: 1rem;
    border-radius: 8px;
    margin-bottom: 2rem;
    box-shadow: 0 2px 4px rgba(0,0,0,0.07);
    border: 1px solid #e1e5e9;
  }
  
  .back-nav a {
    padding: 0.5rem 1rem;
    border: 2px solid #667eea;
    background: white;
    color: #667eea;
    text-decoration: none;
    border-radius: 6px;
    font-weight: 600;
    margin-right: 1rem;
    transition: all 0.3s ease;
    display: inline-block;
  }
  
  .back-nav a:hover {
    background: #667eea;
    color: white;
    transform: translateY(-2px);
  }

  .summary {
    background: white;
    padding: 2rem;
    border-radius: 12px;
    margin-bottom: 2rem;
    box-shadow: 0 4px 6px rgba(0,0,0,0.07);
    border: 1px solid #e1e5e9;
  }

  .summary h2 {
    margin: 0 0 1rem 0;
    color: #333;
    font-size: 1.5rem;
  }

  .summary p {
    margin: 0.5rem 0;
    color: #666;
    font-size: 1rem;
  }
  
  .players-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
  }
  
  .team-section {
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 6px rgba(0,0,0,0.07);
    border: 1px solid #e1e5e9;
    transition: all 0.3s ease;
    position: relative;
  }
  
  .team-section::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
  }
  
  .team-section:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.12);
  }
  
  .team-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 1.5rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: relative;
  }

  .team-header-left {
    display: flex;
    align-items: center;
    gap: 1rem;
  }
  
  .team-logo {
    height: 40px;
    width: 40px;
    object-fit: contain;
    border: 2px solid rgba(255,255,255,0.3);
    border-radius: 8px;
    background: rgba(255,255,255,0.1);
    padding: 0.5rem;
    display: none;
  }
  
  .team-logo.loaded {
    display: block;
  }
  
  .team-header h3 {
    margin: 0;
    font-size: 1.3rem;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
  }
  
  .player-count {
    background: rgba(255,255,255,0.2);
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 600;
    backdrop-filter: blur(10px);
  }
  
  .players-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  
  .player-item {
    border-bottom: 1px solid #f0f0f0;
    transition: background-color 0.2s ease;
  }
  
  .player-item:last-child {
    border-bottom: none;
  }
  
  .player-item:hover {
    background-color: #f8f9fa;
  }
  
  .player-link {
    display: block;
    padding: 1rem 1.5rem;
    text-decoration: none;
    color: inherit;
    transition: all 0.2s ease;
  }
  
  .player-link:hover {
    background-color: #e9ecef;
    padding-left: 2rem;
  }
  
  .player-name {
    font-weight: 600;
    color: #333;
    font-size: 1rem;
    margin-bottom: 0.3rem;
  }
  
  .player-stats {
    font-size: 0.85rem;
    color: #666;
    line-height: 1.4;
  }

  .loading {
    text-align: center;
    padding: 3rem;
    color: #666;
    font-style: italic;
  }

  .no-data {
    text-align: center;
    padding: 2rem;
    color: #666;
  }

  @media (max-width: 768px) {
    .page-container {
      padding: 1rem;
    }
    
    .page-header {
      padding: 2rem 1rem;
    }
    
    .page-header h1 {
      font-size: 2rem;
    }
    
    .players-container {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }
    
    .team-header {
      padding: 1rem;
      flex-direction: column;
      text-align: center;
      gap: 1rem;
    }
    
    .team-header-left {
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .team-header h3 {
      font-size: 1.2em;
    }
    
    .player-count {
      font-size: 0.8em;
    }
  }
  
  @media (max-width: 480px) {
    .player-link {
      padding: 12px 15px;
    }
    
    .player-link:hover {
      padding-left: 20px;
    }
  }
</style>
  <link rel="stylesheet" href="mobile-enhancements.css">
</head>
<body>
<div class="page-container">
  <div class="filters-nav">
    <nav class="nav-container">
      <a href="index.html" class="nav-link">🏠 Home</a>
      <a href="current-season.html" class="nav-link">🍂 Current Season</a>
      <a href="batting.html" class="nav-link batting">⚾ Batting Stats</a>
      <a href="pitching.html" class="nav-link pitching">🥎 Pitching Stats</a>
      <a href="teams.html" class="nav-link">🏆 All Teams</a>
      <a href="players.html" class="nav-link">👤 All Players</a>
      <a href="seasons.html" class="nav-link">📅 All Seasons</a>
      <a href="leaders.html" class="nav-link">📊 Career Leaders</a>
      <a href="compare.html" class="nav-link">⚖️ Player Comparison</a>
      <a href="h2h_grid.html" class="nav-link">⚔️ Head-to-Head Grid</a>
      <a href="pictures.html" class="nav-link">📷 Gallery</a>
      <a href="charts.html" class="nav-link">📈 Performance Charts</a>
    </nav>
  </div>

  <!-- Mobile Navigation -->
  <div class="mobile-nav-container">
    <div class="mobile-nav-header">
      <div class="mobile-nav-title">⚾ Mountainside Aces</div>
      <button class="hamburger-menu" onclick="toggleMobileMenu()" aria-label="Toggle navigation">☰</button>
    </div>
    <nav class="mobile-nav-menu" id="mobileNavMenu">
      <a href="index.html" class="mobile-nav-item">🏠 Home</a>
      <a href="current-season.html" class="mobile-nav-item">🍂 Current Season</a>
      <a href="weekend-preview.html" class="mobile-nav-item">🔮 Weekend Preview</a>
      <a href="projections.html" class="mobile-nav-item">📈 Playoff Projections</a>
      <a href="batting.html" class="mobile-nav-item">⚾ Batting Stats</a>
      <a href="pitching.html" class="mobile-nav-item">🥎 Pitching Stats</a>
      <a href="teams.html" class="mobile-nav-item">🏆 All Teams</a>
      <a href="players.html" class="mobile-nav-item">👤 All Players</a>
      <a href="seasons.html" class="mobile-nav-item">📅 All Seasons</a>
      <a href="awards.html" class="mobile-nav-item">🏅 Awards</a>
      <a href="leaders.html" class="mobile-nav-item">📊 Career Leaders</a>
      <a href="milestones.html" class="mobile-nav-item">🎯 Milestones</a>
      <a href="compare.html" class="mobile-nav-item">📈 Player Comparison</a>
      <a href="team_compare.html" class="mobile-nav-item">🆚 Team Comparison</a>
      <a href="h2h_grid.html" class="mobile-nav-item">⚔️ Head-to-Head Grid</a>
	  <a href="pictures.html" class="mobile-nav-item">📷 Gallery</a>
    </nav>
  </div>


  <div class="page-header">
    <h1>🍂 2025 Fall Season Players</h1>
    <p>All active players in the current season organized by team</p>
  </div>

  <div class="summary">
    <h2>Current Season Overview</h2>
    <p id="totalPlayersText">Loading player information...</p>
    <p>Players shown below are currently active in the 2025 Fall season. Click on any player to view their detailed career statistics.</p>
  </div>

  <div id="players-container" class="players-container">
    <div class="loading">Loading current season players...</div>
  </div>
</div>

<script>
let allData = [];
const currentSeason = "Fall";
const currentYear = "2025";

// Load the data
fetch("data.json")
  .then(res => res.json())
  .then(data => {
    allData = data.map(p => ({
      name: p.name ? p.name.trim() : "",
      team: p.team ? p.team.trim() : "",
      year: p.year ? String(p.year).trim() : "",
      season: p.season ? p.season.trim() : "",
      sub: p.sub ? p.sub.trim() : "",
      games: Number(p.games) || 0,
      atBats: Number(p.atBats) || 0,
      hits: Number(p.hits) || 0,
      runs: Number(p.runs) || 0,
      walks: Number(p.walks) || 0
    }));
    
    generateCurrentSeasonPlayers();
  })
  .catch(error => {
    console.error("Error loading data:", error);
    document.getElementById("players-container").innerHTML = 
      '<div class="no-data">Error loading player data. Please check that data.json is available.</div>';
  });

function generateCurrentSeasonPlayers() {
  // Filter for current season players only (non-substitutes)
  const currentSeasonPlayers = allData.filter(p => 
    p.year === currentYear && 
    p.season === currentSeason && 
    p.sub !== "Yes" &&
    p.name && 
    p.team &&
    p.team.toLowerCase() !== "kings" // Exclude "Kings" team
  );

  if (currentSeasonPlayers.length === 0) {
    document.getElementById("players-container").innerHTML = 
      '<div class="no-data">No current season players found.</div>';
    document.getElementById("totalPlayersText").textContent = 
      "No active players found for 2025 Fall season.";
    return;
  }

  // Group players by team
  const teamGroups = {};
  currentSeasonPlayers.forEach(player => {
    if (!teamGroups[player.team]) {
      teamGroups[player.team] = [];
    }
    teamGroups[player.team].push(player);
  });

  // Sort teams alphabetically
  const sortedTeams = Object.keys(teamGroups).sort();

  // Count total players and teams
  const totalPlayers = currentSeasonPlayers.length;
  const totalTeams = sortedTeams.length;

  // Update summary
  document.getElementById("totalPlayersText").textContent = 
    `Active Players: ${totalPlayers} across ${totalTeams} teams in the 2025 Fall season`;

  const container = document.getElementById("players-container");
  container.innerHTML = '';

  sortedTeams.forEach(teamName => {
    const players = teamGroups[teamName];
    
    // Sort players by games played (descending), then by batting average, then by name
    const sortedPlayers = players.sort((a, b) => {
      // Primary: Games played (descending)
      if (b.games !== a.games) {
        return b.games - a.games;
      }
      
      // Secondary: Batting average (descending)
      const baA = a.atBats > 0 ? a.hits / a.atBats : 0;
      const baB = b.atBats > 0 ? b.hits / b.atBats : 0;
      if (baB !== baA) {
        return baB - baA;
      }
      
      // Tertiary: Name (alphabetical)
      return a.name.localeCompare(b.name);
    });

    // Create team section
    const teamSection = document.createElement('div');
    teamSection.className = 'team-section';

    const teamHeader = document.createElement('div');
    teamHeader.className = 'team-header';

    const teamHeaderLeft = document.createElement('div');
    teamHeaderLeft.className = 'team-header-left';

    // Try to load team logo
    const logo = document.createElement('img');
    logo.className = 'team-logo';
    logo.src = `logos/${teamName.toLowerCase().replace(/\s+/g, '_')}.png`;
    logo.alt = `${teamName} logo`;
    logo.onload = function() { 
      this.classList.add('loaded'); 
      this.style.display = 'block';
    };
    logo.onerror = function() { 
      this.style.display = 'none'; 
    };

    const teamTitle = document.createElement('h3');
    teamTitle.textContent = teamName;

    teamHeaderLeft.appendChild(logo);
    teamHeaderLeft.appendChild(teamTitle);

    const playerCount = document.createElement('div');
    playerCount.className = 'player-count';
    playerCount.textContent = `${players.length} players`;

    teamHeader.appendChild(teamHeaderLeft);
    teamHeader.appendChild(playerCount);

    const playersList = document.createElement('ul');
    playersList.className = 'players-list';

    sortedPlayers.forEach(player => {
      const playerItem = createPlayerItem(player);
      playersList.appendChild(playerItem);
    });

    teamSection.appendChild(teamHeader);
    teamSection.appendChild(playersList);
    container.appendChild(teamSection);
  });
}

function createPlayerItem(player) {
  const playerItem = document.createElement('li');
  playerItem.className = 'player-item';

  const playerLink = document.createElement('a');
  playerLink.href = `player.html?name=${encodeURIComponent(player.name)}`;
  playerLink.className = 'player-link';

  const playerNameDiv = document.createElement('div');
  playerNameDiv.className = 'player-name';
  playerNameDiv.textContent = player.name;

  const playerStats = document.createElement('div');
  playerStats.className = 'player-stats';

  // Calculate current season stats
  const battingAverage = player.atBats > 0 ? (player.hits / player.atBats).toFixed(3) : '.000';
  const onBasePercentage = (player.atBats + player.walks) > 0 ? 
    ((player.hits + player.walks) / (player.atBats + player.walks)).toFixed(3) : '.000';

  playerStats.textContent = 
    `${player.games}G • ${player.hits}/${player.atBats} (${battingAverage}) • ${player.runs}R • ${player.walks}BB • ${onBasePercentage} OBP`;

  playerLink.appendChild(playerNameDiv);
  playerLink.appendChild(playerStats);
  playerItem.appendChild(playerLink);

  return playerItem;
}
</script>
 <script src="mobile-enhancements.js"></script>
</body>
</html>