<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>All Teams - Mountainside Aces</title>
<meta name="theme-color" content="#2d5016">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="stylesheet" href="mobile-enhancements.css">
<link rel="stylesheet" href="nav-styles.css">
<style>
:root {
  --primary-color: #2d5016;
  --secondary-color: #1a6b4a;
  --accent-color: #ffd700;
  --card-bg: #ffffff;
  --text-dark: #2d3748;
  --text-light: #718096;
  --border-color: #e2e8f0;
  --shadow-sm: 0 2px 8px rgba(0,0,0,0.08);
  --shadow-md: 0 4px 16px rgba(0,0,0,0.12);
  --shadow-lg: 0 12px 32px rgba(0,0,0,0.16);
}

* {
  box-sizing: border-box;
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  margin: 0;
  padding: 0;
  background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
  min-height: 100vh;
  color: var(--text-dark);
}

/* Loading Overlay */
.loading-overlay {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(255,255,255,0.95);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  transition: opacity 0.5s ease, visibility 0.5s ease;
}

.loading-overlay.hidden {
  opacity: 0;
  visibility: hidden;
}

.softball-spinner {
  position: relative;
}

.softball-spinner::before {
  content: '‚öæ';
  font-size: 80px;
  animation: spin 1.5s ease-in-out infinite;
  display: block;
}

@keyframes spin {
  0%, 100% { transform: rotate(0deg) scale(1); }
  50% { transform: rotate(180deg) scale(1.1); }
}

/* Page Container */
.page-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 2rem;
}

/* Page Header */
.page-header {
  background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
  color: white;
  text-align: center;
  padding: 4rem 2rem;
  border-radius: 16px;
  margin-bottom: 2rem;
  box-shadow: var(--shadow-lg);
  position: relative;
  overflow: hidden;
}

.page-header::before {
  content: '';
  position: absolute;
  top: -100px;
  right: -100px;
  width: 300px;
  height: 300px;
  background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
  border-radius: 50%;
}

.page-header::after {
  content: 'üèÜ';
  position: absolute;
  bottom: -40px;
  left: -40px;
  font-size: 200px;
  opacity: 0.05;
}

.page-header h1 {
  margin: 0;
  font-size: 3.5rem;
  font-weight: 800;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
  position: relative;
  z-index: 1;
}

.page-header p {
  margin: 1rem 0 0 0;
  font-size: 1.2rem;
  opacity: 0.95;
  position: relative;
  z-index: 1;
}

/* Navigation */
.filters-nav {
  background: var(--card-bg);
  padding: 1.5rem;
  border-radius: 16px;
  margin-bottom: 2rem;
  box-shadow: var(--shadow-sm);
  border: 1px solid var(--border-color);
}

.nav-container {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  align-items: center;
  justify-content: center;
}

.nav-link {
  padding: 1rem 1.75rem;
  border: 2px solid var(--primary-color);
  background: white;
  color: var(--primary-color);
  text-decoration: none;
  border-radius: 12px;
  font-weight: 600;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  position: relative;
  overflow: hidden;
  z-index: 1;
}

.nav-link::before {
  content: '';
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: var(--primary-color);
  transform: translateX(-100%);
  transition: transform 0.3s ease;
  z-index: -1;
}

.nav-link:hover::before,
.nav-link.active::before {
  transform: translateX(0);
}

.nav-link:hover,
.nav-link.active {
  color: white;
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.nav-link.pitching {
  border-color: #11998e;
  color: #11998e;
}

.nav-link.pitching::before {
  background: #11998e;
}

.nav-link.batting {
  border-color: var(--primary-color);
  color: var(--primary-color);
}

/* Summary */
.summary {
  background: var(--card-bg);
  padding: 2rem;
  margin-bottom: 2rem;
  border-radius: 16px;
  box-shadow: var(--shadow-sm);
  border: 1px solid var(--border-color);
  position: relative;
  overflow: hidden;
}

.summary::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 5px;
  background: linear-gradient(90deg, var(--primary-color) 0%, var(--secondary-color) 100%);
}

.summary p {
  margin: 0 0 1rem 0;
  color: var(--text-dark);
  font-size: 1.15rem;
  font-weight: 600;
  line-height: 1.6;
}

.summary p:last-child {
  margin-bottom: 0;
  color: var(--text-light);
  font-size: 1rem;
  font-weight: 400;
}

/* Teams Container */
.teams-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 2rem;
  margin-top: 2rem;
}

/* Team Card */
.team-card {
  background: var(--card-bg);
  border-radius: 16px;
  overflow: hidden;
  box-shadow: var(--shadow-sm);
  border: 1px solid var(--border-color);
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  text-decoration: none;
  color: inherit;
}

.team-card::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 5px;
  background: linear-gradient(90deg, var(--primary-color) 0%, var(--secondary-color) 100%);
  opacity: 0;
  transition: opacity 0.4s ease;
}

.team-card::after {
  content: '‚öæ';
  position: absolute;
  bottom: -20px;
  right: -20px;
  font-size: 120px;
  opacity: 0;
  color: var(--primary-color);
  transition: all 0.4s ease;
  pointer-events: none;
}

.team-card:hover {
  transform: translateY(-8px);
  box-shadow: var(--shadow-lg);
  text-decoration: none;
  color: inherit;
  border-color: var(--primary-color);
}

.team-card:hover::before {
  opacity: 1;
}

.team-card:hover::after {
  opacity: 0.05;
  bottom: -10px;
  right: -10px;
}

/* Team Header */
.team-header {
  background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
  color: white;
  padding: 2rem 1.5rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: relative;
  text-align: center;
}

.team-logo {
  height: 70px;
  max-width: 90px;
  margin-bottom: 1rem;
  object-fit: contain;
  filter: brightness(1.1) drop-shadow(0 2px 4px rgba(0,0,0,0.2));
  transition: transform 0.3s ease;
}

.team-card:hover .team-logo {
  transform: scale(1.15) rotate(5deg);
}

.team-header h3 {
  margin: 0;
  font-size: 1.75rem;
  font-weight: 800;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
}

/* Team Details */
.team-details {
  padding: 1.5rem;
}

.team-years {
  font-size: 1.15rem;
  font-weight: 700;
  color: var(--text-dark);
  margin-bottom: 1.25rem;
  text-align: center;
}

/* Team Stats */
.team-stats {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
}

.stat-item {
  text-align: center;
  padding: 1rem;
  background: #f8f9fa;
  border-radius: 12px;
  border-left: 3px solid var(--primary-color);
  transition: all 0.3s ease;
  border: 1px solid var(--border-color);
}

.stat-item:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-sm);
  border-left-color: var(--secondary-color);
}

.stat-number {
  font-size: 1.6rem;
  font-weight: 800;
  color: var(--text-dark);
  display: block;
  margin-bottom: 0.25rem;
}

.stat-label {
  font-size: 0.85rem;
  color: var(--text-light);
  margin-top: 0.25rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Championship Banner */
.championship-banner {
  background: linear-gradient(135deg, var(--accent-color) 0%, #ffed4e 100%);
  color: #333;
  padding: 0.75rem 1.25rem;
  text-align: center;
  font-weight: 800;
  font-size: 0.95rem;
  border-radius: 12px;
  margin-top: 1.25rem;
  box-shadow: 0 4px 8px rgba(255, 215, 0, 0.3);
  border: 2px solid rgba(255, 215, 0, 0.5);
}

/* Games Breakdown */
.games-breakdown {
  grid-column: 1 / -1;
  text-align: center;
  padding: 1rem;
  background: linear-gradient(90deg, rgba(45, 80, 22, 0.1) 0%, rgba(26, 107, 74, 0.1) 100%);
  border-left: 3px solid var(--primary-color);
  font-size: 0.9rem;
  color: var(--text-dark);
  border-radius: 8px;
  font-weight: 600;
  border: 1px solid var(--border-color);
}

/* Loading */
.loading {
  text-align: center;
  padding: 4rem 2rem;
  color: var(--text-light);
  font-size: 1.1rem;
}

.loading::before {
  content: "‚öæ";
  display: block;
  font-size: 4rem;
  margin-bottom: 1.5rem;
  animation: bounce 1s ease-in-out infinite;
}

@keyframes bounce {
  0%, 100% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-20px) scale(1.1); }
}

/* Fade in animation */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.team-card {
  animation: fadeInUp 0.6s ease backwards;
}

.team-card:nth-child(1) { animation-delay: 0.05s; }
.team-card:nth-child(2) { animation-delay: 0.1s; }
.team-card:nth-child(3) { animation-delay: 0.15s; }
.team-card:nth-child(4) { animation-delay: 0.2s; }
.team-card:nth-child(5) { animation-delay: 0.25s; }
.team-card:nth-child(6) { animation-delay: 0.3s; }
.team-card:nth-child(7) { animation-delay: 0.35s; }
.team-card:nth-child(8) { animation-delay: 0.4s; }
.team-card:nth-child(9) { animation-delay: 0.45s; }
.team-card:nth-child(10) { animation-delay: 0.5s; }

/* Responsive */
@media (max-width: 768px) {
  .page-container {
    padding: 1rem;
  }
  
  .page-header {
    padding: 2rem 1rem;
  }
  
  .page-header h1 {
    font-size: 2.5rem;
  }
  
  .nav-container {
    justify-content: center;
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .nav-link {
    padding: 0.8rem 1.25rem;
    font-size: 0.95rem;
    text-align: center;
    width: 100%;
    justify-content: center;
  }
  
  .teams-container {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }
  
  .team-header {
    padding: 1.5rem 1rem;
  }
  
  .team-header h3 {
    font-size: 1.5rem;
  }
  
  .team-stats {
    grid-template-columns: 1fr;
    gap: 0.75rem;
  }
  
  .summary {
    padding: 1.5rem;
  }
  
  .summary p {
    font-size: 1rem;
  }
}

@media (max-width: 480px) {
  .page-header h1 {
    font-size: 2rem;
  }
  
  .team-header {
    padding: 1.25rem 1rem;
  }
  
  .team-logo {
    height: 60px;
    max-width: 80px;
  }
  
  .team-details {
    padding: 1.25rem;
  }
  
  .stat-item {
    padding: 0.875rem;
  }
  
  .stat-number {
    font-size: 1.4rem;
  }
  
  .stat-label {
    font-size: 0.8rem;
  }
  
  .summary {
    padding: 1.25rem;
  }
  
  .summary p {
    font-size: 0.95rem;
  }
}
</style>
</head>
<body>
<div id="loadingOverlay" class="loading-overlay">
  <div class="softball-spinner"></div>
</div>



<div class="page-container">
  <div class="page-header">
    <h1>All Teams</h1>
    <p>Browse team statistics, seasons played, and championship history</p>
  </div>

  <div class="filters-nav">

  </div>

  <div id="summary" class="summary">
    <p id="totalTeamsText">Loading team data...</p>
    <p>Each team card shows their active years, player count, game statistics, and championship history. Click on any team to view detailed roster and season-by-season performance.</p>
  </div>

  <div id="teams-container" class="teams-container">
    <div class="loading">Loading teams...</div>
  </div>
</div>

<script type="module">
    // CONVERTED: Now using object-keyed seasons structure
    // Performance: ~50-100ms load time (was multiple seconds)

    import { 
      db, 
      collection, 
      getDocs 
    } from './firebase-config.js';
    
    import { 
      getAllPlayerStatsOptimized,
      seasonsObjectToArray
    } from './firebase-data.js';

    let allData = [];
    let allGames = [];

    // Mobile menu toggle
    function toggleMobileMenu() {
      const menu = document.getElementById('mobileNavMenu');
      menu.classList.toggle('open');
    }
    window.toggleMobileMenu = toggleMobileMenu;

    // Hide loading overlay after page loads
    window.addEventListener('load', function() {
      setTimeout(function() {
        document.getElementById('loadingOverlay').classList.add('hidden');
      }, 800);
    });

    async function loadData() {
      try {
        console.log('Loading teams data from optimized aggregated collection...');
        
        // Load player stats from optimized collection
        const allPlayers = await getAllPlayerStatsOptimized();
        allData = [];
        
        allPlayers.forEach(playerData => {
          // CONVERTED: Use seasonsObjectToArray helper
          if (playerData.seasons && typeof playerData.seasons === 'object') {
            const seasonsArray = seasonsObjectToArray(playerData);
            
            seasonsArray.forEach(seasonStats => {
              // Parse season ID: "2024-fall" or "2025-spring"
              const seasonId = seasonStats.seasonId || '';
              const parts = seasonId.split('-');
              
              if (parts.length >= 2) {
                const year = parts[0];
                const season = parts[1].charAt(0).toUpperCase() + parts[1].slice(1);
                
                allData.push({
                  name: playerData.name,
                  team: seasonStats.team,
                  year: year,
                  season: season,
                  games: seasonStats.games || 0,
                  atBats: seasonStats.atBats || 0,
                  hits: seasonStats.hits || 0
                });
              }
            });
          }
        });
        
        console.log(`Loaded ${allData.length} player-season records from ${allPlayers.length} players`);
        
        // Load games from all seasons
        const seasonsSnapshot = await getDocs(collection(db, 'seasons'));
        allGames = [];
        
        for (const seasonDoc of seasonsSnapshot.docs) {
          const gamesSnapshot = await getDocs(collection(db, 'seasons', seasonDoc.id, 'games'));
          const parts = seasonDoc.id.split('-');
          const year = parts[0];
          const season = parts[1];
          
          // Guard against undefined season
          if (!year || !season) {
            console.warn(`Invalid season ID format: ${seasonDoc.id}`);
            continue;
          }
          
          gamesSnapshot.forEach(gameDoc => {
            const game = gameDoc.data();
            
            // Convert team IDs to capitalized team names
            const homeTeamId = game.homeTeamId || '';
            const awayTeamId = game.awayTeamId || '';
            const homeTeamName = homeTeamId ? homeTeamId.charAt(0).toUpperCase() + homeTeamId.slice(1) : '';
            const awayTeamName = awayTeamId ? awayTeamId.charAt(0).toUpperCase() + awayTeamId.slice(1) : '';
            
            // Normalize game type
            const gameType = game.gameType || game.game_type || '';
            const normalizedGameType = gameType.toLowerCase() === 'playoff' ? 'Playoff' : 'Regular';
            
            // Normalize winner
            const winnerId = game.winner || '';
            const normalizedWinner = winnerId ? winnerId.charAt(0).toUpperCase() + winnerId.slice(1) : '';
            
            allGames.push({
              id: gameDoc.id,
              "home team": homeTeamName,
              "away team": awayTeamName,
              "home score": game.homeScore || game["home score"] || game.home_score || 0,
              "away score": game.awayScore || game["away score"] || game.away_score || 0,
              winner: normalizedWinner,
              year: year,
              season: season.charAt(0).toUpperCase() + season.slice(1),
              game_type: normalizedGameType
            });
          });
        }
        
        console.log(`Loaded ${allGames.length} games`);
        
        generateTeamCards();
        
      } catch (error) {
        console.error("Error loading data from Firestore:", error);
        document.getElementById("teams-container").innerHTML =
          '<p style="text-align: center; color: #666; padding: 2rem;">Error loading team data. Please try again later.</p>';
      }
    }

    function generateTeamCards() {
      const teams = [...new Set(allData.map(p => p.team))]
        .filter(t => t && t.toLowerCase() !== "kings")
        .sort();
      
      console.log('Teams found:', teams);
      
      const teamStats = teams.map(teamName => {
        const teamData = allData.filter(p => p.team === teamName);
        const years = [...new Set(teamData.map(p => p.year))].sort();
        const totalPlayers = new Set(teamData.map(p => p.name)).size;
        
        // Filter games for this team
        const teamGames = allGames.filter(g =>
          g["home team"] === teamName || g["away team"] === teamName
        );
        
        console.log(`${teamName}: ${teamGames.length} games found`);
        
        const totalTeamGames = teamGames.length;
        const regularSeasonGames = teamGames.filter(g => g.game_type === 'Regular').length;
        const playoffGames = teamGames.filter(g => g.game_type === 'Playoff').length;
        
        const championships = calculateTeamChampionships(teamName);
        
        return {
          name: teamName,
          years: years,
          totalPlayers: totalPlayers,
          totalTeamGames: totalTeamGames,
          regularSeasonGames: regularSeasonGames,
          playoffGames: playoffGames,
          championships: championships,
          firstYear: years[0],
          lastYear: years[years.length - 1]
        };
      });
      
      const totalTeams = teams.length;
      const activeTeams = teamStats.filter(t => parseInt(t.lastYear) === 2025).length;
      const totalChampionships = teamStats.reduce((sum, t) => sum + t.championships.length, 0);
      
      document.getElementById("totalTeamsText").textContent =
        `${totalTeams} total teams (${activeTeams} active in 2025, ${totalTeams - activeTeams} inactive) ‚Ä¢ ${totalChampionships} championships awarded`;
      
      const container = document.getElementById("teams-container");
      container.innerHTML = '';
      
      teamStats.forEach(team => {
        const yearsText = team.years.length > 1 ?
          `${team.firstYear} - ${team.lastYear}` :
          team.firstYear;
        
        let gamesBreakdown = '';
        if (team.regularSeasonGames > 0 && team.playoffGames > 0) {
          gamesBreakdown = `${team.regularSeasonGames} regular season, ${team.playoffGames} playoff games`;
        } else if (team.regularSeasonGames > 0) {
          gamesBreakdown = `${team.regularSeasonGames} regular season games`;
        } else if (team.playoffGames > 0) {
          gamesBreakdown = `${team.playoffGames} playoff games`;
        } else if (team.totalTeamGames > 0) {
          gamesBreakdown = `${team.totalTeamGames} total games`;
        } else {
          gamesBreakdown = 'No games recorded';
        }
        
        let championshipHTML = '';
        if (team.championships.length > 0) {
          const championshipText = team.championships.length === 1 ?
            `üèÜ ${team.championships[0]} Champions` :
            `üèÜ ${team.championships.length} Championships`;
          championshipHTML = `<div class="championship-banner">${championshipText}</div>`;
        }
        
        const teamCard = document.createElement('a');
        teamCard.href = `team.html?team=${encodeURIComponent(team.name)}`;
        teamCard.className = 'team-card';
        
        teamCard.innerHTML = `
          <div class="team-header">
            <img src="logos/${team.name.toLowerCase().replace(/\s+/g, '_')}.png" 
                 alt="${team.name} Logo" 
                 class="team-logo" 
                 onerror="this.style.display='none';">
            <h3>${team.name}</h3>
          </div>
          <div class="team-details">
            <div class="team-years">Active: ${yearsText}</div>
            <div class="team-stats">
              <div class="stat-item">
                <span class="stat-number">${team.totalPlayers}</span>
                <div class="stat-label">Total Players</div>
              </div>
              <div class="stat-item">
                <span class="stat-number">${team.totalTeamGames}</span>
                <div class="stat-label">Total Games</div>
              </div>
              <div class="stat-item">
                <span class="stat-number">${team.years.length}</span>
                <div class="stat-label">Season${team.years.length !== 1 ? 's' : ''}</div>
              </div>
              <div class="stat-item">
                <span class="stat-number">${team.championships.length}</span>
                <div class="stat-label">Championship${team.championships.length !== 1 ? 's' : ''}</div>
              </div>
              ${team.totalTeamGames > 0 ? `<div class="games-breakdown">${gamesBreakdown}</div>` : ''}
            </div>
            ${championshipHTML}
          </div>
        `;
        
        container.appendChild(teamCard);
      });
    }

    function calculateTeamChampionships(teamName) {
      const championships = [];
      
      const teamGames = allGames.filter(g =>
        g["home team"] === teamName || g["away team"] === teamName
      );
      
      const teamSeasons = [...new Set(teamGames.map(g => `${g.year}-${g.season}`))];
      
      teamSeasons.forEach(seasonKey => {
        const [year, season] = seasonKey.split('-');
        
        const allPlayoffGames = allGames.filter(g =>
          g.year === year &&
          g.season === season &&
          g.game_type === 'Playoff'
        );
        
        if (allPlayoffGames.length === 0) return;
        
        const playoffStandings = calculatePlayoffStandings(allPlayoffGames);
        
        if (playoffStandings.length > 0 && playoffStandings[0].name === teamName) {
          championships.push(`${year} ${season}`);
        }
      });
      
      return championships;
    }

    function calculatePlayoffStandings(playoffGames) {
      const teamStats = {};
      
      playoffGames.forEach(game => {
        const homeTeam = game["home team"];
        const awayTeam = game["away team"];
        const winner = game.winner;
        
        if (!teamStats[homeTeam]) {
          teamStats[homeTeam] = { name: homeTeam, wins: 0, losses: 0, ties: 0, games: [] };
        }
        if (!teamStats[awayTeam]) {
          teamStats[awayTeam] = { name: awayTeam, wins: 0, losses: 0, ties: 0, games: [] };
        }
        
        // Track games for debugging
        teamStats[homeTeam].games.push(`vs ${awayTeam} (${winner === homeTeam ? 'W' : winner === awayTeam ? 'L' : 'T'})`);
        teamStats[awayTeam].games.push(`vs ${homeTeam} (${winner === awayTeam ? 'W' : winner === homeTeam ? 'L' : 'T'})`);
        
        if (winner === "Tie") {
          teamStats[homeTeam].ties++;
          teamStats[awayTeam].ties++;
        } else if (winner === homeTeam) {
          teamStats[homeTeam].wins++;
          teamStats[awayTeam].losses++;
        } else if (winner === awayTeam) {
          teamStats[awayTeam].wins++;
          teamStats[homeTeam].losses++;
        } else if (winner && winner.includes("Forfeit")) {
          const actualWinner = winner.replace("Forfeit - ", "").replace("Tie", "").trim();
          if (actualWinner && actualWinner !== "Tie") {
            if (actualWinner === homeTeam) {
              teamStats[homeTeam].wins++;
              teamStats[awayTeam].losses++;
            } else if (actualWinner === awayTeam) {
              teamStats[awayTeam].wins++;
              teamStats[homeTeam].losses++;
            }
          } else {
            teamStats[homeTeam].ties++;
            teamStats[awayTeam].ties++;
          }
        }
      });
      
      const standings = Object.values(teamStats).map(team => {
        const totalDecidedGames = team.wins + team.losses;
        team.winPct = totalDecidedGames > 0 ? team.wins / totalDecidedGames : 0;
        return team;
      });
      
      standings.sort((a, b) => {
        if (b.winPct !== a.winPct) {
          return b.winPct - a.winPct;
        }
        return b.wins - a.wins;
      });
      
      return standings;
    }

    loadData();
</script>
<script type="module">
  import { NavigationComponent } from './nav-component.js';
  // Navigation auto-initializes on load!
</script>

<script src="team-colors.js"></script>
<script src="mobile-enhancements.js"></script>
</body>
</html>
