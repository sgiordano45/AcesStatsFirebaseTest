<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Player Comparison - Aces Stats</title>
<link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="mobile-enhancements.css">
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    min-height: 100vh;
  }
  
  .page-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
  }
  
  .page-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    text-align: center;
    padding: 3rem 2rem;
    border-radius: 12px;
    margin-bottom: 2rem;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  }
  
  .page-header h1 {
    margin: 0;
    font-size: 2.5rem;
    font-weight: bold;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
  }
  
  .page-header p {
    margin: 1rem 0 0 0;
    font-size: 1.1rem;
    opacity: 0.9;
  }
  
  .filters-nav {
    background: white;
    padding: 1.5rem;
    border-radius: 12px;
    margin-bottom: 2rem;
    box-shadow: 0 4px 6px rgba(0,0,0,0.07);
    border: 1px solid #e1e5e9;
  }
  
  .nav-container {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    align-items: center;
    justify-content: center;
  }
  
  .nav-link {
    padding: 0.8rem 1.5rem;
    border: 2px solid #667eea;
    background: white;
    color: #667eea;
    text-decoration: none;
    border-radius: 8px;
    font-weight: 600;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  .nav-link:hover {
    background: #667eea;
    color: white;
    transform: translateY(-2px);
  }
  
  .nav-link.active {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-color: #667eea;
  }
  
  .nav-link.batting {
    border-color: #11998e;
    color: #11998e;
  }
  
  .nav-link.batting:hover {
    background: #11998e;
    color: white;
  }
  
  .nav-link.pitching {
    border-color: #11998e;
    color: #11998e;
  }
  
  .nav-link.pitching:hover {
    background: #11998e;
    color: white;
  }

  .comparison-section {
    background: white;
    padding: 2rem;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.07);
    border: 1px solid #e1e5e9;
    margin-bottom: 2rem;
    position: relative;
    overflow: hidden;
  }
  
  .comparison-section::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
  }
  
  .comparison-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-top: 20px;
  }
  
  .player-selector {
    background: #f8f9fa;
    border: 2px solid #e9ecef;
    border-radius: 12px;
    padding: 25px;
    transition: all 0.3s ease;
  }
  
  .player-selector:hover {
    border-color: #667eea;
    box-shadow: 0 2px 8px rgba(102, 126, 234, 0.1);
  }
  
  .player-selector h3 {
    margin: 0 0 15px 0;
    text-align: center;
    color: #333;
    font-size: 1.3em;
    font-weight: 600;
  }
  
  .player-select {
    width: 100%;
    padding: 12px;
    font-size: 16px;
    border: 2px solid #dee2e6;
    border-radius: 8px;
    margin-bottom: 15px;
    background: white;
    transition: all 0.3s ease;
  }
  
  .player-select:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
  }
  
  .comparison-type {
    display: flex;
    gap: 15px;
    justify-content: center;
    margin: 30px 0;
  }
  
  .comparison-type button {
    padding: 12px 24px;
    border: 2px solid #667eea;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    font-weight: 600;
    transition: all 0.3s ease;
    background: white;
    color: #667eea;
  }
  
  .comparison-type button.active {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-color: #667eea;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
  }
  
  .comparison-type button:not(.active):hover {
    background: #667eea;
    color: white;
    transform: translateY(-2px);
  }
  
  #seasonSelector {
    text-align: center;
    margin: 20px 0;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 12px;
    border: 1px solid #e9ecef;
  }
  
  #seasonSelector label {
    margin-right: 15px;
    font-weight: 600;
    color: #333;
    font-size: 16px;
  }
  
  #seasonSelect {
    padding: 10px 15px;
    font-size: 16px;
    border: 2px solid #dee2e6;
    border-radius: 8px;
    background: white;
    min-width: 200px;
  }
  
  #seasonSelect:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
  }
  
  .comparison-results {
    margin-top: 30px;
  }
  
  .career-comparison {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: 30px;
    margin-bottom: 30px;
  }
  
  .player-career-stats {
    background: white;
    border: 1px solid #e9ecef;
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    transition: all 0.3s ease;
  }
  
  .player-career-stats:hover {
    box-shadow: 0 4px 16px rgba(0,0,0,0.1);
  }
  
  .player-career-stats h4 {
    margin: 0 0 20px 0;
    text-align: center;
    font-size: 1.4em;
    color: #333;
    font-weight: 700;
  }
  
  .stat-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 0;
    border-bottom: 1px solid #f1f3f4;
  }
  
  .stat-row:last-child {
    border-bottom: none;
  }
  
  .stat-label {
    font-weight: 600;
    color: #666;
    font-size: 14px;
  }
  
  .stat-value {
    font-weight: bold;
    color: #333;
    font-size: 16px;
  }
  
  .comparison-divider {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5em;
    color: #ccc;
    font-weight: bold;
  }
  
  .no-comparison {
    text-align: center;
    padding: 60px 20px;
    color: #666;
    font-style: italic;
    font-size: 1.1em;
    background: #f8f9fa;
    border-radius: 12px;
    border: 2px dashed #dee2e6;
  }
  
  /* Mobile responsive adjustments */
  @media (max-width: 768px) {
    .page-container {
      padding: 1rem;
    }
    
    .page-header {
      padding: 2rem 1rem;
    }
    
    .page-header h1 {
      font-size: 2rem;
    }
    
    .nav-container {
      justify-content: center;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .nav-link {
      padding: 10px 15px;
      font-size: 14px;
      text-align: center;
      width: 100%;
      justify-content: center;
    }
    
    .comparison-container {
      grid-template-columns: 1fr;
      gap: 15px;
    }
    
    .career-comparison {
      grid-template-columns: 1fr;
      gap: 20px;
    }
    
    .comparison-divider {
      display: none;
    }
    
    .comparison-type {
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }
    
    .comparison-type button {
      width: 250px;
      padding: 15px 20px;
    }
  }
  
  @media (max-width: 480px) {
    .comparison-section {
      padding: 1.5rem;
    }
    
    .player-selector {
      padding: 20px;
    }
    
    .player-career-stats {
      padding: 20px;
    }
    
    .player-career-stats h4 {
      font-size: 1.2em;
    }
    
    .comparison-type button {
      width: 100%;
      padding: 12px 15px;
      font-size: 14px;
    }
  }
</style>
</head>
<body>
<div class="page-container">
  <div class="page-header">
    <h1>Player Comparison Tool</h1>
    <p>Compare player statistics, performance, and achievements across their careers</p>
  </div>

  <div class="filters-nav">
    <nav class="nav-container">
      <a href="index.html" class="nav-link">🏠 Home</a>
      <a href="current-season.html" class="nav-link">🏂 Current Season</a>
      <a href="batting.html" class="nav-link batting">⚾ Batting Stats</a>
      <a href="pitching.html" class="nav-link pitching">🥎 Pitching Stats</a>
      <a href="teams.html" class="nav-link">🏆 All Teams</a>
      <a href="players.html" class="nav-link">👤 All Players</a>
      <a href="seasons.html" class="nav-link">📅 All Seasons</a>
      <a href="leaders.html" class="nav-link">📊 Career Leaders</a>
      <a href="compare.html" class="nav-link active">⚖️ Player Comparison</a>
      <a href="h2h_grid.html" class="nav-link">⚔️ Head-to-Head Grid</a>
      <a href="pictures.html" class="nav-link">📷 Gallery</a>
      <a href="charts.html" class="nav-link">📈 Performance Charts</a>
    </nav>
  </div>

  <!-- Mobile Navigation -->
  <div class="mobile-nav-container">
    <div class="mobile-nav-header">
      <div class="mobile-nav-title">📈 Player Comparison</div>
      <button class="hamburger-menu" onclick="toggleMobileMenu()" aria-label="Toggle navigation">☰</button>
    </div>
    <nav class="mobile-nav-menu" id="mobileNavMenu">
      <a href="index.html" class="mobile-nav-item">🏠 Home</a>
      <a href="current-season.html" class="mobile-nav-item">🏂 Current Season</a>
      <a href="weekend-preview.html" class="mobile-nav-item">🔮 Weekend Preview</a>
      <a href="projections.html" class="mobile-nav-item">📈 Playoff Projections</a>
      <a href="batting.html" class="mobile-nav-item">⚾ Batting Stats</a>
      <a href="pitching.html" class="mobile-nav-item">🥎 Pitching Stats</a>
      <a href="teams.html" class="mobile-nav-item">🏆 All Teams</a>
      <a href="players.html" class="mobile-nav-item">👤 All Players</a>
      <a href="seasons.html" class="mobile-nav-item">📅 All Seasons</a>
      <a href="awards.html" class="mobile-nav-item">🏅 Awards</a>
      <a href="leaders.html" class="mobile-nav-item">📊 Career Leaders</a>
      <a href="milestones.html" class="mobile-nav-item">🎯 Milestones</a>
      <a href="compare.html" class="mobile-nav-item active">📈 Player Comparison</a>
      <a href="team_compare.html" class="mobile-nav-item">🆚 Team Comparison</a>
      <a href="h2h_grid.html" class="mobile-nav-item">⚔️ Head-to-Head Grid</a>
      <a href="pictures.html" class="mobile-nav-item">📷 Gallery</a>
    </nav>
  </div>

  <div class="comparison-section">
    <div class="comparison-container">
      <div class="player-selector">
        <h3>Player 1</h3>
        <select id="player1Select" class="player-select">
          <option value="">Select Player 1...</option>
        </select>
      </div>
      
      <div class="player-selector">
        <h3>Player 2</h3>
        <select id="player2Select" class="player-select">
          <option value="">Select Player 2...</option>
        </select>
      </div>
    </div>

    <div class="comparison-type">
      <button id="careerBtn" onclick="switchComparison('career')" class="active">Career Comparison</button>
      <button id="seasonBtn" onclick="switchComparison('season')">Season Comparison</button>
    </div>

    <div id="seasonSelector" style="display: none;">
      <label for="seasonSelect">Select Season:</label>
      <select id="seasonSelect">
        <option value="">Choose a season...</option>
      </select>
    </div>
  </div>

  <div id="comparisonResults" class="comparison-results">
    <div class="no-comparison">
      Select two players above to begin comparison
    </div>
  </div>
</div>

<script>
let allData = [];
let allAwards = [];
let currentComparison = 'career';
let player1Data = null;
let player2Data = null;

// Load both batting data and awards
Promise.all([
  fetch("data.json").then(res => res.json()),
  fetch("awards.json").then(res => res.ok ? res.json() : [])
])
  .then(([battingData, awardsData]) => {
    allData = cleanData(battingData);
    allAwards = awardsData;
    populatePlayerSelects();
  })
  .catch(error => {
    console.error("Error loading data:", error);
    document.getElementById("comparisonResults").innerHTML = 
      '<div class="no-comparison">Error loading player data. Please check that data files are available.</div>';
  });

function cleanData(data) {
  return data.map(p => ({
    ...p,
    name: p.name ? p.name.trim() : "",
    team: p.team ? p.team.trim() : "",
    season: p.season ? p.season.trim() : "",
    year: p.year ? String(p.year).trim() : "",
    games: Number(p.games) || 0,
    atBats: Number(p.atBats) || 0,
    hits: Number(p.hits) || 0,
    runs: Number(p.runs) || 0,
    walks: Number(p.walks) || 0,
    AcesWar: p.AcesWar === "N/A" || !p.AcesWar ? "N/A" : Number(p.AcesWar),
    Sub: p.Sub || p.sub || ""
  }));
}

function populatePlayerSelects() {
  // Get unique players
  const players = [...new Set(allData.map(p => p.name))].filter(name => name).sort();
  
  const player1Select = document.getElementById('player1Select');
  const player2Select = document.getElementById('player2Select');
  
  players.forEach(playerName => {
    const option1 = document.createElement('option');
    option1.value = playerName;
    option1.textContent = playerName;
    player1Select.appendChild(option1);
    
    const option2 = document.createElement('option');
    option2.value = playerName;
    option2.textContent = playerName;
    player2Select.appendChild(option2);
  });
  
  player1Select.addEventListener('change', updateComparison);
  player2Select.addEventListener('change', updateComparison);
}

function updateComparison() {
  const player1Name = document.getElementById('player1Select').value;
  const player2Name = document.getElementById('player2Select').value;
  
  if (!player1Name || !player2Name) {
    document.getElementById('comparisonResults').innerHTML = 
      '<div class="no-comparison">Select two players above to begin comparison</div>';
    return;
  }
  
  if (player1Name === player2Name) {
    document.getElementById('comparisonResults').innerHTML = 
      '<div class="no-comparison">Please select two different players</div>';
    return;
  }
  
  player1Data = allData.filter(p => p.name === player1Name);
  player2Data = allData.filter(p => p.name === player2Name);
  
  // Re-populate season selector if in season mode
  if (currentComparison === 'season') {
    populateSeasonSelector();
  }
  
  renderComparison();
}

function switchComparison(type) {
  currentComparison = type;
  
  // Update button styles
  const careerBtn = document.getElementById('careerBtn');
  const seasonBtn = document.getElementById('seasonBtn');
  const seasonSelector = document.getElementById('seasonSelector');
  
  if (type === 'career') {
    careerBtn.classList.add('active');
    seasonBtn.classList.remove('active');
    seasonSelector.style.display = 'none';
  } else {
    seasonBtn.classList.add('active');
    careerBtn.classList.remove('active');
    seasonSelector.style.display = 'block';
    populateSeasonSelector();
  }
  
  renderComparison();
}

function populateSeasonSelector() {
  const seasonSelect = document.getElementById('seasonSelect');
  
  if (!player1Data || !player2Data) return;
  
  // Get all unique seasons from both players
  const allSeasons = new Set();
  
  player1Data.forEach(season => {
    allSeasons.add(`${season.year}-${season.season}`);
  });
  
  player2Data.forEach(season => {
    allSeasons.add(`${season.year}-${season.season}`);
  });
  
  // Clear existing options except first
  seasonSelect.innerHTML = '<option value="">Choose a season...</option>';
  
  // Sort seasons (most recent first)
  const sortedSeasons = Array.from(allSeasons).sort((a, b) => {
    const [yearA, seasonA] = a.split('-');
    const [yearB, seasonB] = b.split('-');
    
    if (yearB !== yearA) return parseInt(yearB) - parseInt(yearA);
    return seasonB.localeCompare(seasonA);
  });
  
  sortedSeasons.forEach(seasonKey => {
    const [year, season] = seasonKey.split('-');
    const option = document.createElement('option');
    option.value = seasonKey;
    option.textContent = `${year} ${season}`;
    seasonSelect.appendChild(option);
  });
  
  // Remove existing event listeners and add new one
  const newSeasonSelect = seasonSelect.cloneNode(true);
  seasonSelect.parentNode.replaceChild(newSeasonSelect, seasonSelect);
  newSeasonSelect.addEventListener('change', renderComparison);
}

function renderComparison() {
  if (!player1Data || !player2Data) return;
  
  const resultsDiv = document.getElementById('comparisonResults');
  
  if (currentComparison === 'career') {
    resultsDiv.innerHTML = renderCareerComparison();
  } else {
    const selectedSeason = document.getElementById('seasonSelect').value;
    if (selectedSeason) {
      resultsDiv.innerHTML = renderSeasonComparison(selectedSeason);
    } else {
      resultsDiv.innerHTML = '<div class="no-comparison">Please select a season to compare</div>';
    }
  }
}

function renderCareerComparison() {
  const player1Stats = aggregatePlayerStats(player1Data);
  const player2Stats = aggregatePlayerStats(player2Data);
  
  return `
    <div class="career-comparison">
      <div class="player-career-stats">
        <h4>${player1Stats.name}</h4>
        <div class="stat-row">
          <span class="stat-label">Games:</span>
          <span class="stat-value">${player1Stats.totalGames}</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">At Bats:</span>
          <span class="stat-value">${player1Stats.totalAtBats}</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Hits:</span>
          <span class="stat-value">${player1Stats.totalHits}</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Runs:</span>
          <span class="stat-value">${player1Stats.totalRuns}</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Walks:</span>
          <span class="stat-value">${player1Stats.totalWalks}</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Batting Average:</span>
          <span class="stat-value">${player1Stats.battingAverage}</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">On-Base %:</span>
          <span class="stat-value">${player1Stats.onBasePercentage}</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Avg AcesBPI:</span>
          <span class="stat-value">${player1Stats.avgAcesWar}</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Seasons Played:</span>
          <span class="stat-value">${player1Stats.seasonsPlayed}</span>
        </div>
        ${player1Stats.awards && player1Stats.awards !== '' ? `
        <div class="stat-row">
          <span class="stat-label">Awards:</span>
          <span class="stat-value">${player1Stats.awards}</span>
        </div>
        ` : ''}
      </div>
      
      <div class="comparison-divider">VS</div>
      
      <div class="player-career-stats">
        <h4>${player2Stats.name}</h4>
        <div class="stat-row">
          <span class="stat-label">Games:</span>
          <span class="stat-value">${player2Stats.totalGames}</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">At Bats:</span>
          <span class="stat-value">${player2Stats.totalAtBats}</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Hits:</span>
          <span class="stat-value">${player2Stats.totalHits}</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Runs:</span>
          <span class="stat-value">${player2Stats.totalRuns}</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Walks:</span>
          <span class="stat-value">${player2Stats.totalWalks}</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Batting Average:</span>
          <span class="stat-value">${player2Stats.battingAverage}</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">On-Base %:</span>
          <span class="stat-value">${player2Stats.onBasePercentage}</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Avg AcesBPI:</span>
          <span class="stat-value">${player2Stats.avgAcesWar}</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Seasons Played:</span>
          <span class="stat-value">${player2Stats.seasonsPlayed}</span>
        </div>
        ${player2Stats.awards && player2Stats.awards !== '' ? `
        <div class="stat-row">
          <span class="stat-label">Awards:</span>
          <span class="stat-value">${player2Stats.awards}</span>
        </div>
        ` : ''}
      </div>
    </div>
  `;
}

function renderSeasonComparison(selectedSeason) {
  const [year, season] = selectedSeason.split('-');
  
  // Find the specific season data for each player
  const player1Season = player1Data.find(s => s.year === year && s.season === season);
  const player2Season = player2Data.find(s => s.year === year && s.season === season);
  
  // Get season awards for both players
  const player1SeasonAwards = getSeasonAwards(player1Data[0].name, year, season);
  const player2SeasonAwards = getSeasonAwards(player2Data[0].name, year, season);
  
  return `
    <div class="career-comparison">
      <div class="player-career-stats">
        <h4>${player1Data[0].name} - ${year} ${season}</h4>
        ${player1Season ? renderSeasonStats(player1Season, player1SeasonAwards) : '<div style="text-align: center; color: #666; font-style: italic;">Did not play this season</div>'}
      </div>
      
      <div class="comparison-divider">VS</div>
      
      <div class="player-career-stats">
        <h4>${player2Data[0].name} - ${year} ${season}</h4>
        ${player2Season ? renderSeasonStats(player2Season, player2SeasonAwards) : '<div style="text-align: center; color: #666; font-style: italic;">Did not play this season</div>'}
      </div>
    </div>
  `;
}

function renderSeasonStats(seasonData, seasonAwards) {
  const BA = seasonData.atBats > 0 ? (seasonData.hits / seasonData.atBats).toFixed(3) : ".000";
  const OBP = (seasonData.atBats + seasonData.walks) > 0 
    ? ((seasonData.hits + seasonData.walks) / (seasonData.atBats + seasonData.walks)).toFixed(3) 
    : ".000";
  const AcesWar = seasonData.AcesWar !== "N/A" && !isNaN(seasonData.AcesWar) 
    ? Number(seasonData.AcesWar).toFixed(2) 
    : "N/A";
  const subStatus = (seasonData.Sub || "").toString().trim().toLowerCase() === "yes" ? "Yes" : "No";
  
  return `
    <div class="stat-row">
      <span class="stat-label">Team:</span>
      <span class="stat-value">${seasonData.team}</span>
    </div>
    <div class="stat-row">
      <span class="stat-label">Games:</span>
      <span class="stat-value">${seasonData.games}</span>
    </div>
    <div class="stat-row">
      <span class="stat-label">At Bats:</span>
      <span class="stat-value">${seasonData.atBats}</span>
    </div>
    <div class="stat-row">
      <span class="stat-label">Hits:</span>
      <span class="stat-value">${seasonData.hits}</span>
    </div>
    <div class="stat-row">
      <span class="stat-label">Runs:</span>
      <span class="stat-value">${seasonData.runs}</span>
    </div>
    <div class="stat-row">
      <span class="stat-label">Walks:</span>
      <span class="stat-value">${seasonData.walks}</span>
    </div>
    <div class="stat-row">
      <span class="stat-label">AcesBPI:</span>
      <span class="stat-value">${AcesWar}</span>
    </div>
    <div class="stat-row">
      <span class="stat-label">Batting Average:</span>
      <span class="stat-value">${BA}</span>
    </div>
    <div class="stat-row">
      <span class="stat-label">On-Base %:</span>
      <span class="stat-value">${OBP}</span>
    </div>
    <div class="stat-row">
      <span class="stat-label">Substitute:</span>
      <span class="stat-value">${subStatus}</span>
    </div>
    ${seasonAwards ? `
    <div class="stat-row">
      <span class="stat-label">Season Awards:</span>
      <span class="stat-value">${seasonAwards}</span>
    </div>
    ` : ''}
  `;
}

function getSeasonAwards(playerName, year, season) {
  const seasonAwards = allAwards.filter(award => 
    award.Player && award.Player.trim() === playerName &&
    award.Year === year && award.Season === season &&
    award.Award && award.Award.trim() !== ""
  );
  
  if (seasonAwards.length === 0) return null;
  
  // Group awards by type and count
  const awardCounts = {};
  seasonAwards.forEach(award => {
    const awardType = award.Award.trim();
    if (!awardCounts[awardType]) {
      awardCounts[awardType] = 0;
    }
    awardCounts[awardType]++;
  });
  
  // Format awards as "Award Type: Count | Award Type: Count"
  const formattedAwards = Object.entries(awardCounts)
    .sort(([a], [b]) => a.localeCompare(b)) // Sort alphabetically
    .map(([awardType, count]) => count > 1 ? `${awardType}: ${count}` : awardType);
  
  return formattedAwards.join(' | ');
}

function aggregatePlayerStats(playerData) {
  const stats = {
    name: playerData[0].name,
    totalGames: 0,
    totalAtBats: 0,
    totalHits: 0,
    totalRuns: 0,
    totalWalks: 0,
    acesWarValues: [],
    seasonsPlayed: 0,
    awards: ''
  };
  
  // Count only non-substitute seasons
  const nonSubSeasons = playerData.filter(season => {
    const subStatus = (season.Sub || "").toString().trim().toLowerCase();
    return subStatus !== "yes";
  });
  
  stats.seasonsPlayed = nonSubSeasons.length;
  
  playerData.forEach(season => {
    stats.totalGames += season.games;
    stats.totalAtBats += season.atBats;
    stats.totalHits += season.hits;
    stats.totalRuns += season.runs;
    stats.totalWalks += season.walks;
    
    if (season.AcesWar !== "N/A" && !isNaN(season.AcesWar)) {
      stats.acesWarValues.push(Number(season.AcesWar));
    }
  });
  
  // Calculate awards for this player
  const playerAwards = allAwards.filter(award => 
    award.Player && award.Player.trim() === stats.name && award.Award && award.Award.trim() !== ""
  );
  
  // Group awards by type and count
  const awardCounts = {};
  playerAwards.forEach(award => {
    const awardType = award.Award.trim();
    if (!awardCounts[awardType]) {
      awardCounts[awardType] = 0;
    }
    awardCounts[awardType]++;
  });
  
  // Format awards as "Award Type: Count | Award Type: Count"
  const formattedAwards = Object.entries(awardCounts)
    .sort(([a], [b]) => a.localeCompare(b))
    .map(([awardType, count]) => `${awardType}: ${count}`);
  
  stats.awards = formattedAwards.length > 0 ? formattedAwards.join(' | ') : '';
  
  stats.battingAverage = stats.totalAtBats > 0 ? 
    (stats.totalHits / stats.totalAtBats).toFixed(3) : ".000";
  
  stats.onBasePercentage = (stats.totalAtBats + stats.totalWalks) > 0 ? 
    ((stats.totalHits + stats.totalWalks) / (stats.totalAtBats + stats.totalWalks)).toFixed(3) : ".000";
  
  stats.avgAcesWar = stats.acesWarValues.length > 0 ?
    (stats.acesWarValues.reduce((a, b) => a + b, 0) / stats.acesWarValues.length).toFixed(2) : "N/A";
  
  return stats;
}
</script>
  <script src="team-colors.js"></script>
 <script src="mobile-enhancements.js"></script>
</body>
</html>